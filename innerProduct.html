<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles/acordian.css">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles/order.css">
</head>

<body>
    <div id="loginModalSection"></div>
  <div id="otpModalSection"></div>
  <div id="signupModalSection"></div>
  <div id="signupOtpModalSection"></div>
  <div class="container bg-white py-2">

  </div>
    <div id="main_inner">
        <div id="side_inner">
            <h2>Product & Services</h2>

            <button class="accordion"><h4 onclick="one1()">Makeup</h4></button>
            <div class="panel">
                <ul>
                    <li>Foundation</li>
                    <li>Compact</li>
                    <li>Pan Cake Foundation</li>
                    <li>Pan Stick Foundation</li>
                </ul>
            </div>

            <button class="accordion"><h4 onclick="two2()">Lipstick</h4></button>
            <div class="panel">
                <ul>
                    <li>Baked Brick Lipstick</li>
                    <li>Cerise Pink Lipstick</li>
                    <li>Coral Red Lipstick</li>
                    <li>Desert Rose Lipstick</li>
                    <li>Eternal Red Lipstick</li>
                    <li>Muddy Pink Lipstick</li>
                    <li>Pretty Purple Lipstick</li>
                    <li>Radiant Red Lipstick</li>
                    <li>Red Cherry Lipstick</li>
                    <li>Rose Blossom Lipstick</li>
                </ul>
            </div>

            <button class="accordion"><h4 onclick="three3()">Lips Product</h4></button>
            <div class="panel">
                <ul>
                    <li>Lip Gloss</li>
                    <li>Lip Stick</li>
                    <li>Lip Liner</li>
                </ul>
            </div>

            <button class="accordion"><h4 onclick="four4()">Bleach Cream</h4></button>
            <div class="panel">
                <ul>
                    <li>Fruit Bleach</li>
                    <li>Gold Bleach</li>
                    <li>Personal Bleach</li>
                </ul>
            </div>

            <button class="accordion"><h4 onclick="five5()">Scrubs</h4></button>
            <div class="panel">
                <ul>
                    <li>Fairness Scrub</li>
                    <li>Mix Fruit Scrub</li>
                    <li>Facial Scrub</li>
                </ul>
            </div>

            <button class="accordion"><h4 onclick="six6()">Eyes Product</h4></button>
            <div class="panel">
                <ul>
                    <li>Mascara</li>
                    <li>Eye Shadow</li>
                    <li>Eye Liner</li>
                </ul>
            </div>

            <button class="accordion"><h4 onclick="seven7()">Lip Care</h4></button>
            <div class="panel">
                <ul>
                    <li>Lip Balm</li>
                    <li>Lip Guard</li>
                </ul>
            </div>
        </div>
        <div id="second_inner">
            <h2>Makeup</h2>
            <p>Offering you a complete choice of products</p>
            <div id="upper_right">

            </div>
            <div id="right_inner">

            </div>
        </div>
    </div>

    <!-- order model popup -->
    <div id="bootstrap"></div>

</body>

</html>
<script type="module">
    import MainNavbar from './components/MainNavbar.js';
    import BusinessNavbar from './components/BusinessNavbar.js';
    let prevContent = document.body.innerHTML;
    // MainNavbar();
    document.body.innerHTML = MainNavbar() + prevContent;
    prevContent = document.querySelector('body>.container.bg-white');
    prevContent.innerHTML = BusinessNavbar() + prevContent.innerHTML;
    let userBtn = document.querySelector('#userBtn');
  
    userBtn.addEventListener('mouseover', () => {
      let userBtnDropdownMenu = document.querySelector('#userBtnDropdownMenu');
      userBtnDropdownMenu.classList.add('show');
    });
    userBtn.addEventListener('mouseleave', () => {
      let userBtnDropdownMenu = document.querySelector('#userBtnDropdownMenu');
      userBtnDropdownMenu.addEventListener('mouseleave', () => {
        showMenu(userBtnDropdownMenu);
      });
    });
    let showMenu = (userBtnDropdownMenu) => {
      userBtnDropdownMenu.classList.remove('show');
    }
  
    // Creating Modal Components
    import createModal from './components/Modals.js';
    // creating user 
    class User {
      constructor(contact) {
        this.contact = contact;
      }
    }
    let generateOTP = (otpVerify) => {
      if (otpVerify.length > 0) {
        otpVerify = '';
      }
      for (let i = 0; i < 4; i++) {
        let num = Math.round(Math.random() * 10);
        if (num === 10) {
          num--;
        }
        otpVerify += num;
      }
      return otpVerify;
    }
    // console.log(createModal);
    let loginModalSection = document.getElementById('loginModalSection');
    loginModalSection.innerHTML = createModal('loginModal', 'loginModalLabel', 'Sign In', 'Mobile Number', 'phoneNumber', 'mobileInput', 'Enter Your Mobile Number', 'loginModalNumberToOTPBtn', 'otpModal');
    let loginModalNumberToOTPBtn = document.getElementById('loginModalNumberToOTPBtn');
    let contact;
    let otpVerify = ''
    loginModalNumberToOTPBtn.addEventListener('click', () => {
      // console.log('Hi');
      contact = document.getElementById('mobileInput').value;
      // console.log(contact);
      otpVerify = generateOTP(otpVerify);
      console.log('otpVerify:', otpVerify)
    });
    let otpModalSection = document.getElementById('otpModalSection');
    otpModalSection.innerHTML = createModal('otpModal', 'otpModalLabel', 'Login with One Time Password (OTP)', `Enter the 4 digit One Time Password (OTP) sent to your Mobile Number`, 'otp', 'otpInput', 'X-X-X-X', 'otpModalButton', '');
    let otpModalButton = document.getElementById('otpModalButton');
    otpModalButton.addEventListener('click', () => {
      let otp = document.getElementById('otpInput').value;
      // console.log(otp);
      if (otp === otpVerify) {
        let userExists = false;
        let userTemp = JSON.parse(localStorage.getItem('users')) || [];
        let user;
        userTemp.forEach((el) => {
          if (contact === el.contact) {
            userExists = true;
            user = el;
          }
        });
        if (userExists) {
          // console.log(user);
          localStorage.setItem('currentUser', JSON.stringify(user));
          window.location.reload();
        }
        else {
          alert('user does not exist');
        }
  
      }
      else {
        alert('Invalid OTP');
      }
    });
  
    let signupModal = createModal('signupModal', 'signupModalLabel', 'Sign Up', 'Enter your mobileNumber', 'phoneNumber', 'signupPhoneNumber', 'Enter your phone number', 'signupModalButton', 'signupOtpModal');
    let signupModalSection = document.getElementById('signupModalSection');
    signupModalSection.innerHTML = signupModal;
    let signupOtpModalSection = document.getElementById('signupOtpModalSection');
    signupOtpModalSection.innerHTML = createModal('signupOtpModal', 'signupOtpModalLabel', 'Sign with One Time Password (OTP)', `Enter the 4 digit One Time Password (OTP) sent to your Mobile Number`, 'otp', 'otpInputSignup', 'X-X-X-X', 'signupOtpModalButton', '');
    let signupModalButton = document.getElementById('signupModalButton');
    signupModalButton.addEventListener('click', () => {
      contact = document.getElementById('signupPhoneNumber').value;
      otpVerify = generateOTP(otpVerify);
      console.log(otpVerify);
    });
    let signupOtpModalButton = document.getElementById('signupOtpModalButton');
    signupOtpModalButton.addEventListener('click', () => {
      let otp = document.getElementById('otpInputSignup').value;
      if (otp === otpVerify) {
        let user = new User(contact);
        let users = JSON.parse(localStorage.getItem('users')) || [];
        users.push(user);
        localStorage.setItem('users', JSON.stringify(users));
        localStorage.setItem('currentUser', JSON.stringify(user));
      }
    });
  
  </script>
  <script>
    let showSignUp = () => {
      console.log('Sign Up');
    }
    let businessNavbarNavItems = document.querySelectorAll('.businessNavbar');
    let logout = () => {
      localStorage.removeItem('currentUser');
      window.location.reload();
    }
  </script>
  <!-- Navbar Script Ends -->
  <script src="scripts/searchbar.js"></script>
  <script src="scripts/db.js"></script>

<script src="scripts/acordian.js"></script>
<script src="scripts/innerPro.js" type="module"></script>
<script src="scripts/local.js"></script>
<script src="scripts/buttons.js"></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
  crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>